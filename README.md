# Домашнее задание №2 по дисциплине "Конфигурационное управление"

## Задание 2. Вариант 3

---

Разработать инструмент командной строки для визуализации 
графа зависимостей, включая транзитивные зависимости. 
Сторонние программы или библиотеки для получения зависимостей 
использовать нельзя.

Зависимости определяются для git-репозитория. Для описания графа 
зависимостей используется представление Graphviz. Визуализатор 
должен выводить результат на экран в виде кода.
Построить граф зависимостей для коммитов, в узлах которого 
находятся списки файлов и папок. Граф необходимо строить
только для коммитов ранее заданной даты.

Ключами командной строки задаются:
* Путь к программе для визуализации графов.
* Путь к анализируемому репозиторию.
* Путь к файлу-результату в виде кода.
* Дата коммитов в репозитории.

Все функции визуализатора зависимостей должны быть покрыты тестами.

---

## Dependency Visualizer  

**Dependency Visualizer** — инструмент командной строки для визуализации графа зависимостей коммитов в Git-репозитории. Граф строится для коммитов, сделанных до указанной даты, с узлами, содержащими информацию о списках файлов и папок.  

Результат визуализации выводится на экран в виде кода и преобразуется в png файл при помощи Graphviz.

---

## Использование  

### Формат команды  
```bash

python dependency_visualizer.py \
    --visualizer-path <путь_к_программе_визуализации> \
    --repo-path <путь_к_репозиторию> \
    --output-path <путь_к_выходному_файлу> \
    --date <дата>
```

### Аргументы  
- **`--visualizer-path`**  
  Путь к программе для визуализации графов (например, `dot`, часть пакета Graphviz).  
  *Пример:* `/usr/bin/dot`


- **`--repo-path`**  
  Путь к анализируемому Git-репозиторию.  
  *Пример:* `/home/user/my-repo`  


- **`--output-path`**  
  Путь к выходному файлу, где будет сохранен результат в формате DOT.  
  *Пример:* `output_graph.dot`  


- **`--date`**  
  Дата, до которой нужно учитывать коммиты. Формат: `YYYY-MM-DD`.  
  *Пример:* `2024-01-01`  

---

## Примеры  

### Построение графа  
```bash

python dependency_visualizer.py 
  --visualizer-path  C:\Program Files\Graphviz\bin\dot.exe \
  --date 2025-01-01  \
  --output-path C:\Users\mmyty\PycharmProjects\cm_hw2\output.dot  \
  --repo-path C:\Users\mmyty\PycharmProjects\cm_hw2 

```

---

## Пример вывода  

Пример выходного файла `output_graph.dot` для нескольких коммитов:  
```dot
digraph G {                              
  "71d0441" [label="Commit: 71d0441\nFiles: README.md"];
  "8228bc0" -> "71d0441";
  "8228bc0" [label="Commit: 8228bc0\nFiles: "];
  "f58f822" -> "8228bc0";
  "f58f822" [label="Commit: f58f822\nFiles: .idea/cm_hw2.iml, .idea/misc.xml, main.py, dependency_visualizer.py, test_dependency_visualizer.py"];
  "4af490f" -> "f58f822";
  "4af490f" [label="Commit: 4af490f\nFiles: .idea/cm_hw2.iml, .idea/misc.xml, README.md, main.py, dependency_visualizer.py, test_dependency_visualizer.py"];
  "0aeb162" -> "4af490f";
  "0aeb162" [label="Commit: 0aeb162\nFiles: .idea/misc.xml, README.md, main.py, dependency_visualizer.py, test_dependency_visualizer.py"];
}

```
---

## Пример графа 

![image](dependency_graph.png)

---

## Тестирование  

#### Результаты тестирования 

![image](tests.jpg)

Проект включает тесты для всех основных функций. Для запуска тестов выполните:  
```bash

python -m unittest test_dependency_visualizer.py
```

---

## Зависимости  

- **Python 3.8+**  
- **Graphviz** — для визуализации графов (опционально, для преобразования формата DOT в изображение).  

